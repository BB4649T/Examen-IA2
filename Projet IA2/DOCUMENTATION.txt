ğŸ“‹ Documentation - Dashboard MÃ©tÃ©o ETL
ğŸ—ï¸ Architecture du Projet
Vue d'ensemble

Le dashboard mÃ©tÃ©o est un systÃ¨me complet d'analyse et de visualisation de donnÃ©es mÃ©tÃ©orologiques collectÃ©es via un pipeline ETL automatisÃ© avec Apache Airflow.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   OpenWeather   â”‚â”€â”€â”€â–¶â”‚   Airflow    â”‚â”€â”€â”€â–¶â”‚   Streamlit     â”‚
â”‚      API        â”‚    â”‚   Pipeline   â”‚    â”‚   Dashboard     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“¦ Installation et PrÃ©requis
DÃ©pendances Python

pip install streamlit pandas plotly numpy datetime

Structure des fichiers

projet_meteo/
â”œâ”€â”€ dashboard.py              # Application Streamlit principale
â”œâ”€â”€ weather_data_sample.csv   # DonnÃ©es mÃ©tÃ©o (gÃ©nÃ©rÃ©es par Airflow)
â”œâ”€â”€ requirements.txt          # DÃ©pendances
â””â”€â”€ README.md                # Documentation

Lancement

streamlit run dashboard.py

ğŸ“Š Format des DonnÃ©es
Structure CSV Attendue

city,country,lat,lon,date,timestamp,temperature,feels_like,humidity,pressure,wind_speed,wind_direction,cloudiness,visibility,weather_main,aqi,pm2_5,pm10,co,no2,o3,comfort_score,season,aqi_category

Description des Colonnes
Colonne 	Type 	Description 	UnitÃ©
city 	String 	Nom de la ville 	-
country 	String 	Code pays (ISO 2) 	-
lat 	Float 	Latitude 	DegrÃ©s
lon 	Float 	Longitude 	DegrÃ©s
date 	DateTime 	Date de l'observation 	YYYY-MM-DD
timestamp 	DateTime 	Horodatage prÃ©cis 	ISO 8601
temperature 	Float 	TempÃ©rature 	Â°C
feels_like 	Float 	TempÃ©rature ressentie 	Â°C
humidity 	Float 	HumiditÃ© relative 	%
pressure 	Float 	Pression atmosphÃ©rique 	hPa
wind_speed 	Float 	Vitesse du vent 	m/s
wind_direction 	Float 	Direction du vent 	DegrÃ©s
cloudiness 	Float 	Couverture nuageuse 	%
visibility 	Float 	VisibilitÃ© 	km
weather_main 	String 	Condition mÃ©tÃ©o principale 	-
aqi 	Float 	Indice qualitÃ© de l'air 	0-5
pm2_5 	Float 	Particules PM2.5 	Î¼g/mÂ³
pm10 	Float 	Particules PM10 	Î¼g/mÂ³
co 	Float 	Monoxyde de carbone 	Î¼g/mÂ³
no2 	Float 	Dioxyde d'azote 	Î¼g/mÂ³
o3 	Float 	Ozone 	Î¼g/mÂ³
comfort_score 	Float 	Score de confort 	0-20
season 	String 	Saison 	Ã‰tÃ©/Automne/Hiver/Printemps
aqi_category 	String 	CatÃ©gorie AQI 	Bon/ModÃ©rÃ©/Mauvais/etc.
ğŸ¯ FonctionnalitÃ©s du Dashboard
1. Filtres Interactifs

    SÃ©lection de villes : Multiselect avec toutes les villes disponibles
    Plage de dates : SÃ©lecteur de pÃ©riode avec limites automatiques
    Mise Ã  jour en temps rÃ©el : Recalcul automatique des mÃ©triques

2. Indicateurs ClÃ©s (KPIs)

# MÃ©triques calculÃ©es
- TempÃ©rature moyenne avec delta
- HumiditÃ© moyenne avec delta
- Indice qualitÃ© air avec delta
- Score confort avec delta

3. Visualisations Principales
Graphiques Temporels

    Ã‰volution tempÃ©rature : Courbes par ville
    Ã‰volution humiditÃ© : Tendances temporelles
    Graphiques interactifs : Zoom, pan, sÃ©lection

QualitÃ© de l'Air

    AQI par ville : Graphique en barres colorÃ©
    Distribution AQI : Graphique en secteurs
    Heatmap polluants : Matrice de concentrations

Analyse Radar

    Profil polluants : Vue multidimensionnelle
    SÃ©lection ville : Analyse personnalisÃ©e
    Ã‰chelle adaptative : Normalisation automatique

4. Analyse de StabilitÃ© MÃ©tÃ©orologique ğŸ¯
Algorithme de Calcul

def calculate_stability_score(city_data):
    # Calcul des Ã©carts-types
    stability_factors = {
        'temperature': city_data['temperature'].std(),
        'humidity': city_data['humidity'].std(),
        'pressure': city_data['pressure'].std(),
        'wind_speed': city_data['wind_speed'].std(),
        'aqi': city_data['aqi'].std()
    }

    # Normalisation (0-100)
    normalized_scores = {}
    for factor, std_val in stability_factors.items():
        normalized_scores[factor] = max(0, 100 - (std_val * 10))

    # Score pondÃ©rÃ©
    weights = {
        'temperature': 0.3,    # 30%
        'humidity': 0.2,       # 20%
        'pressure': 0.2,       # 20%
        'wind_speed': 0.15,    # 15%
        'aqi': 0.15           # 15%
    }

    global_score = sum(normalized_scores[factor] * weights[factor]
                      for factor in normalized_scores)

    return global_score

InterprÃ©tation des Scores

    80-100 : Excellente stabilitÃ© âœ…
    60-79 : Bonne stabilitÃ© âš ï¸
    0-59 : StabilitÃ© modÃ©rÃ©e ğŸš¨

Affichage RÃ©sultats

    Podium : Top 3 des villes stables
    Tableau dÃ©taillÃ© : Scores par critÃ¨re
    Graphique radar : Profil de la ville la plus stable
    Recommandations : Conseils basÃ©s sur le score

ğŸ”§ Configuration AvancÃ©e
Personnalisation des Seuils

# Dans le code, modifiez ces valeurs
STABILITY_THRESHOLDS = {
    'excellent': 80,
    'good': 60,
    'moderate': 40
}

# Poids des critÃ¨res de stabilitÃ©
STABILITY_WEIGHTS = {
    'temperature': 0.3,
    'humidity': 0.2,
    'pressure': 0.2,
    'wind_speed': 0.15,
    'aqi': 0.15
}

Ajout de Nouvelles MÃ©triques

# Exemple : Ajout d'un indice de confort thermique
def calculate_comfort_index(temp, humidity, wind):
    # Formule personnalisÃ©e
    comfort = (temp * 0.6) + (humidity * 0.3) + (wind * 0.1)
    return comfort

ğŸš€ Pipeline ETL Airflow
DAG Structure

# Exemple de DAG Airflow
from airflow import DAG
from airflow.operators.python import PythonOperator

dag = DAG(
    'weather_etl',
    schedule_interval='@daily',
    catchup=False
)

extract_task = PythonOperator(
    task_id='extract_weather_data',
    python_callable=extract_from_openweather,
    dag=dag
)

transform_task = PythonOperator(
    task_id='transform_data',
    python_callable=clean_and_transform,
    dag=dag
)

load_task = PythonOperator(
    task_id='load_to_csv',
    python_callable=save_to_csv,
    dag=dag
)

extract_task >> transform_task >> load_task

Monitoring Pipeline

Le dashboard affiche automatiquement :

    âœ… Ã‰tat des tÃ¢ches
    ğŸ“Š Nombre d'enregistrements
    ğŸ•’ DerniÃ¨re mise Ã  jour
    ğŸŒ Villes surveillÃ©es

ğŸ“ˆ MÃ©triques et Analyses
CorrÃ©lations Automatiques

# Matrice de corrÃ©lation calculÃ©e automatiquement
numeric_columns = [
    'temperature', 'humidity', 'pressure',
    'wind_speed', 'aqi', 'comfort_score'
]
correlation_matrix = df[numeric_columns].corr()

Statistiques Descriptives

    Moyenne, mÃ©diane, Ã©cart-type
    Quartiles et percentiles
    Min/Max par pÃ©riode
    Tendances temporelles

ğŸ¨ Interface Utilisateur
Layout Responsive

# Configuration de page
st.set_page_config(
    page_title="Dashboard MÃ©tÃ©o",
    page_icon="ğŸŒ¦ï¸",
    layout="wide",
    initial_sidebar_state="expanded"
)

Sidebar Filtres

    Multiselect villes : SÃ©lection multiple
    Date range : PÃ©riode personnalisÃ©e
    Ã‰tat temps rÃ©el : Mise Ã  jour automatique

Colonnes Adaptatives

# Disposition responsive
col1, col2 = st.columns(2)
col1, col2, col3, col4 = st.columns(4)

ğŸ” DÃ©pannage
Erreurs Communes
Fichier CSV manquant

âš ï¸ Fichier weather_data_sample.csv non trouvÃ©

Solution : VÃ©rifiez que le fichier existe dans le rÃ©pertoire
Erreur de format de date

ValueError: time data doesn't match format

Solution : VÃ©rifiez le format des colonnes date/timestamp
DonnÃ©es insuffisantes

âš ï¸ DonnÃ©es insuffisantes pour calculer les scores

Solution : Minimum 2 points de donnÃ©es par ville requis
Logs et Debug

# Ajoutez ces lignes pour debug
import logging
logging.basicConfig(level=logging.INFO)

# Dans le code
st.write("Debug info:", df.info())
st.write("Colonnes disponibles:", df.columns.tolist())

ğŸ”„ Maintenance et Ã‰volution
Mise Ã  Jour des DonnÃ©es

    Automatique : Via pipeline Airflow
    Manuelle : Remplacement du fichier CSV
    Cache : Rechargement automatique avec @st.cache_data

Ajout de Nouvelles Villes

# Dans le pipeline ETL
new_cities = ['Londres', 'Tokyo', 'Sydney']
for city in new_cities:
    weather_data = get_weather_data(city)
    df = pd.concat([df, weather_data])

Optimisation Performances

# Cache des calculs lourds
@st.cache_data
def calculate_heavy_metrics(df):
    # Calculs complexes
    return results

ğŸ“ Support et Contact
FAQ

Q: Comment ajouter une nouvelle mÃ©trique ? R: Modifiez la fonction calculate_stability_score() et ajoutez la colonne dans le CSV

Q: Peut-on changer les seuils de stabilitÃ© ? R: Oui, modifiez les constantes STABILITY_THRESHOLDS dans le code

Q: Comment exporter les donnÃ©es ? R: Utilisez le bouton "TÃ©lÃ©charger CSV" dans l'interface
Versions

    v1.0 : Dashboard de base
    v1.1 : Ajout analyse de stabilitÃ©
    v1.2 : AmÃ©liorations UI/UX

ğŸ† Exemple d'Utilisation
Cas d'Usage Typique

# 1. Lancement du dashboard
streamlit run dashboard.py

# 2. SÃ©lection des villes d'intÃ©rÃªt
selected_cities = ['Paris', 'London', 'Berlin']

# 3. Filtrage par pÃ©riode
date_range = ('2025-01-01', '2025-06-30')

# 4. Analyse de stabilitÃ©
# â†’ Le dashboard identifie automatiquement la ville la plus stable
# â†’ Affiche le score et les recommandations

RÃ©sultat Attendu

ğŸ† VILLE LA PLUS STABLE: Paris
ğŸ“Š Score: 85.3/100
âœ… Excellente stabilitÃ© mÃ©tÃ©orologique
ğŸ¯ IdÃ©ale pour activitÃ©s extÃ©rieures planifiÃ©es

Cette documentation est mise Ã  jour avec chaque version du dashboard. Pour les questions spÃ©cifiques, consultez les commentaires dans le code source.
